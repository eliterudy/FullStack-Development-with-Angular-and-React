(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{"04NU":function(module,exports,e){var t=e("sRzZ"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var i={transform:void 0},n=e("aET+")(t,i);t.locals&&(module.exports=t.locals)},"1G4o":function(module,e,t){"use strict";var r=t("q1tI"),i=t.n(r),n=t("eJMc"),s=t.n(n),a=t("BVC1"),o=t("yhVA"),u=t.n(o),c=function AssignmentSubmitBeforeReviewWarning(e){var t=e.computedItem,r={padding:16,margin:"12px 0px"};return i.a.createElement("div",{className:"rc-AssignmentSubmitBeforeReviewWarning"},i.a.createElement("div",{className:"bgcolor-warn-light color-warn-dark",style:r},u()("Submit your project before reviewing classmates.")),i.a.createElement("div",{className:"vertical-box align-items-vertical-center"},i.a.createElement(s.a,{to:a.a.join(t.resourcePath,"submit"),className:"link-button primary"},u()("Go to my project"))))};e.a=c},"46g2":function(module,e,t){"use strict";var r=t("VbXa"),i=t.n(r),n=t("q1tI"),s=t.n(n),a=t("eJMc"),o=t.n(a),u=t("kWps"),c=t("kvW3"),m=t("NXYo"),d=t("Zz7k"),l=t("hbUA"),b=t("yhVA"),v=t.n(b),S=function(e){function GiveFeedbackNoList(){return e.apply(this,arguments)||this}i()(GiveFeedbackNoList,e);var t=GiveFeedbackNoList.prototype;return t.renderMentorGradedMessage=function renderMentorGradedMessage(){return s.a.createElement("div",{className:"rc-GiveFeedbackNoList"},s.a.createElement("div",{className:"c-peer-card"},s.a.createElement("p",null,v()("All grading for this assignment will be done by course mentors."))),s.a.createElement(m.a,{requestedCapability:d.e.viewSubmissionList},this.props.isSubmissionAvailableForReview?this.renderWithAvailableSubmissions():this.renderWithoutAvailableSubmissions()))},t.renderWithAvailableSubmissions=function renderWithAvailableSubmissions(){var e=this.props,t=e.computedItem.requiredReviewCount,r=e.reviewNextLink;return s.a.createElement("div",{className:"rc-GiveFeedbackNoList c-peer-card"},s.a.createElement("div",{className:"body-2-text"},v()("Review fellow learners")),s.a.createElement("p",null,v()("Award points and give constructive feedback using the grading criteria provided (if any). Follow these tips to make the most of your learning experience:")),s.a.createElement("ul",null,s.a.createElement("li",null,v()("Offer specific ideas or suggestions that the learner can apply right away. Be encouraging and supportive.")),s.a.createElement("li",null,v()("Use a translation tool if you have a preferred language that’s different from the learner you’re reviewing. Language usage is never a grading criteria.")),s.a.createElement("li",null,v()("Review #{requiredReviewCount} or more assignment submissions to receive a grade. Help more learners complete this course by giving more reviews.",{requiredReviewCount:t}))),s.a.createElement(o.a,{className:"link-button primary","data-js":"open-course-link",to:r},v()("Start Reviewing")))},t.renderWithoutAvailableSubmissions=function renderWithoutAvailableSubmissions(){var e=this.props,t=e.displayablePhaseSchedule,r=e.computedItem,i=t&&"submit"===t.currentPhase&&t.phaseStarts.review,n=i&&u.a.getFormattedDeadline(i);return n&&r.isPeerAssignmentReviewComplete?s.a.createElement("div",{className:"rc-GiveFeedbackNoList c-peer-card"},s.a.createElement("div",{className:"body-2-text"},v()("No Submissions Available")),s.a.createElement("div",null,s.a.createElement(c.b,{message:v()("\n                There are no submissions available for you to review right now. We'll send you an email when\n                classmates' submissions are available to review. Classmates' submissions will be available to review by\n                {reviewsAvailableTime}.\n              "),reviewsAvailableTime:s.a.createElement("span",{className:"body-2-text"},n)}))):s.a.createElement("div",{className:"rc-GiveFeedbackNoList c-peer-card"},s.a.createElement("div",{className:"body-2-text"},v()("No Submissions Available")),s.a.createElement("div",null,v()("\n              There are no submissions available for you to review right now. Come back later if you want to review\n              more classmates' submissions!\n            ")))},t.render=function render(){var e=this.props,t=e.isSubmissionAvailableForReview,r=e.computedItem;return Object(l.q)(r)?this.renderMentorGradedMessage():t?this.renderWithAvailableSubmissions():this.renderWithoutAvailableSubmissions()},GiveFeedbackNoList}(s.a.Component);e.a=S},Ef0b:function(module,e,t){"use strict";t.d(e,"b",function(){return y}),t.d(e,"c",function(){return A}),t.d(e,"a",function(){return D}),t.d(e,"d",function(){return N});var r=t("yXPU"),i=t.n(r),n=t("o0o1"),s=t.n(n),a=t("S+eF"),o=t.n(a),u=t("F/us"),c=t.n(u),m=t("fAMf"),d=t("StP4"),l=t("i6HE"),b=t("E4RX"),v=t("JAmU"),S=t("uhR6"),f=t("beWW"),p=t("Q3zy"),h=t("o/MR"),g=t("uPmI"),w=t("bPpC"),P=t("Hk9X"),I=function loadAssignment(e,t){var r=t.userId,i=t.courseId,n=t.itemId;return e.dispatch(S.a.LOADING_PEER_ASSIGNMENT),Object(h.a)({userId:r,courseId:i,itemId:n}).then(function(t){return e.dispatch(S.a.LOADED_PEER_ASSIGNMENT,{assignment:Object(P.a)(t),loadedItemId:n}),t})},E=function loadPermissionsAndProgresses(e,t){var r=t.userId,i=t.courseId,n=t.itemId;return e.dispatch(S.a.LOADING_PEER_USER_PERMISSIONS),Object(g.b)(r,i,n).then(function(t){e.dispatch(S.a.LOADED_DISPLAYABLE_PHASE_SCHEDULE,{displayablePhaseSchedule:t.displayablePhaseSchedules});var r=c()(t.assignmentPermissions).chain().pick(function(e){return e.isAllowed}).keys().value();return e.dispatch(S.a.LOADED_PEER_USER_PERMISSIONS,{capabilities:r,capabilitiesWithReasons:t.assignmentPermissions,receivedReviewProgresses:t.receivedReviewProgresses,submissionProgresses:t.submissionProgresses}),t})},y=function(){var e=i()(s.a.mark(function _callee(e,t){var r,i,n,a;return s.a.wrap(function _callee$(s){for(;;)switch(s.prev=s.next){case 0:return r=t.userId,i=t.courseId,n=t.itemId,s.next=3,Object(g.a)({userId:r,courseId:i,itemId:n});case 3:return a=s.sent,e.dispatch(S.a.LOADED_PEER_USER_SUBMISSION_PROGRESSES,{submissionProgresses:a}),s.abrupt("return",a);case 6:case"end":return s.stop()}},_callee)}));return function loadLatestSubmissionProgresses(t,r){return e.apply(this,arguments)}}(),R=function loadSubmissionDraft(e,t){var r=t.userId,i=t.courseId,n=t.itemId,s=t.permissionsAndProgresses,a=t.submissionSchema,u=t.reviewSchema;return e.dispatch(S.a.PEER_SUBMISSION_DRAFT_LOADING),null==s.submissionProgresses.latestDraftSummary?o()(Object(P.g)(a,u,r)).then(function(t){return e.dispatch(S.a.LOADED_PEER_SUBMISSION_DRAFT,{naptimeSubmissionSchema:a,naptimeSubmission:Object(m.a)(a.submissionSchema,r),latestSubmissionAndRelated:t})}):Object(p.b)({userId:r,courseId:i,itemId:n}).then(function(t){var r=Object(P.d)(t);return e.dispatch(S.a.LOADED_PEER_SUBMISSION_DRAFT,{naptimeSubmission:t.submission,naptimeSubmissionSchema:a,latestSubmissionAndRelated:r})})},O=function loadLatestSubmission(e,t){var r=t.userId,i=t.courseId,n=t.itemId,s=t.permissionsAndProgresses,a=t.submissionSchema,u=t.reviewSchema,c=t.shouldLoadOwnPeerViewSubmission;return null==s.submissionProgresses.latestSubmissionSummary?R(e,{userId:r,courseId:i,itemId:n,permissionsAndProgresses:s,submissionSchema:a,reviewSchema:u}):c?Object(v.d)(e,{userId:r,courseId:i,itemId:n,submissionId:s.submissionProgresses.latestSubmissionSummary.computed.id}):o()()},A=function loadReviewQueue(e,t){var r=t.userId,i=t.itemId,n=t.courseId,s=t.limit,a=t.start;return e.dispatch(S.a.REVIEW_QUEUE_LOADING),Object(f.a)({userId:r,courseId:n,itemId:i,start:a,limit:s}).then(function(e){return Object(P.b)(e)}).then(function(t){e.dispatch(S.a.REVIEW_QUEUE_LOADED,{data:t,itemId:i})}).catch(function(t){if(403!==t.status)throw t;e.dispatch(S.a.REVIEW_QUEUE_ERROR,{errorType:"mustSubmitBeforeReviewing"})})},D=function loadInitialPeerData(e,t){var r=t.userId,i=t.courseId,n=t.itemId,s=t.forceRefresh,a=t.shouldLoadOwnPeerViewSubmission,u=e.getStore(w.a).getState(),c="loaded"===u.loadState,m=n!==u.loadedItemId;if(!s&&c&&!m)return o()({});return o.a.all([E(e,{userId:r,courseId:i,itemId:n}),I(e,{userId:r,courseId:i,itemId:n})]).spread(function(t,s){return O(e,{userId:r,courseId:i,itemId:n,permissionsAndProgresses:t,submissionSchema:s.linked["onDemandPeerSubmissionSchemas.v1"][0],reviewSchema:s.linked["onDemandPeerReviewSchemas.v1"][0],shouldLoadOwnPeerViewSubmission:a})})},N=function refreshSubmissionAndProgress(e,t){var r=t.userId,i=t.courseId,n=t.courseSlug,s=t.itemId;return D(e,{userId:r,courseId:i,itemId:s,forceRefresh:!0,shouldLoadOwnPeerViewSubmission:!0}).then(function(){return e.executeAction(b.a,{courseId:i,refreshProgress:!0}).then(function(){return Promise.all([e.executeAction(b.a,{courseId:i,refreshProgress:!0}),e.executeAction(l.b,{courseId:i}),e.executeAction(d.b,{courseSlug:n,refetch:!0})])})})}},FYz7:function(module,e,t){"use strict";var r=t("eLAd"),i=t.n(r),n=t("/VA5"),s=t.n(n),a=t("wd/R"),o=t.n(a),u=t("BVC1"),c=t("15pW"),m=t("Dob0"),d=s.a.AssociatedModel.extend({relations:[{type:s.a.One,key:"creator",relatedModel:m.a}],getReviewLink:function getReviewLink(){return u.a.join(this.collection.getItemLink(),"review",this.get("id"))},getTimestampString:function getTimestampString(){return this.timestampString=o()(this.get("createdAt")).fromNow()},getUserName:function getUserName(){return this.get("creator.fullName")},getUserPhoto:function getUserPhoto(){return this.get("creator.photoUrl")},getTruncatedTitle:function getTruncatedTitle(){return i()(this.get("title"),{length:c.d.gallery.maxTitleLength,separator:" ",omission:"…"})}});e.a=d},GQaP:function(module,e,t){"use strict";var r=t("q1tI"),i=t.n(r),n=t("EqTq"),s=t("m10x"),a=t("kvW3"),o=t("wd/R"),u=t.n(o),c=t("ca6j"),m=t("yhVA"),d=t.n(m),l=t("af/C"),b=t.n(l),v=Object(n.a)("NextUpSubmissionTile"),S=function NextUpSubmissionTile(e){var t=e.submissionSummary,r=e.itemResourcePath,n=t.title,o=t.creator,m=t.createdAt,l,b=r+"/review/"+t.id;return i.a.createElement("a",{href:b,className:v(void 0,void 0,"nostyle")},i.a.createElement("div",{className:v("needs-review-banner")},d()("Needs review")),i.a.createElement("div",{className:v("header",void 0,"headline-4-text")},n),i.a.createElement("div",{className:v("footer")},i.a.createElement("div",{className:v("profile-image-container")},i.a.createElement(c.a,{profile:o,size:40})),i.a.createElement("div",{className:v("name-and-time-container")},i.a.createElement(s.i,{rootClassName:v("full-name")},o.fullName),i.a.createElement("div",{className:v("submission-time")},i.a.createElement(a.b,{message:d()("Submitted {submissionTime}"),submissionTime:u()(m).fromNow()})))))};e.a=S},HCVm:function(module,e,t){"use strict";var r=t("q1tI"),i=t.n(r),n=t("EqTq"),s=t("wd/R"),a=t.n(s),o=t("ca6j"),u=t("rg2u"),c=t.n(u),m=Object(n.a)("SubmissionTile"),d=function SubmissionTile(e){var t=e.submissionSummary,r=e.itemResourcePath,n=t.title,s=t.creator,u=t.createdAt,c,d=r+"/review/"+t.id;return i.a.createElement("div",{className:m()},i.a.createElement("a",{href:d,className:m("link-container",void 0,"nostyle")},i.a.createElement("div",{className:m("header")},i.a.createElement("div",{className:m("submission-time")},a()(u).fromNow()),i.a.createElement("div",{className:m("title",void 0,"headline-1-text")},n)),i.a.createElement("div",{className:m("footer")},i.a.createElement("div",{className:m("profile-image-container")},i.a.createElement(o.a,{profile:s,size:30})),i.a.createElement("div",{className:m("name-and-time-container")},i.a.createElement("div",{className:m("full-name")},s.fullName)))))};e.a=d},JPic:function(module,e,t){"use strict";var r=t("F/us"),i=t.n(r),n=t("welz"),s=t.n(n),a=t("FYz7"),o=s.a.Collection.extend({model:a.a,initialize:function initialize(e,t){this.metadata=t.metadata},getItemLink:function getItemLink(){return this.metadata.getBaseLink()},parse:function parse(e,t){var r;return i()(e.submissionSummaries).map(function(t){var r=i()(e.userProfiles).findWhere({userId:t.creatorId});return i()(t).extend({creator:r})})}});e.a=o},PJCk:function(module,exports,e){},Q3zy:function(module,e,t){"use strict";t.d(e,"b",function(){return l}),t.d(e,"c",function(){return b}),t.d(e,"a",function(){return v});var r=t("lSNA"),i=t.n(r),n=t("S+eF"),s=t.n(n),a=t("fw5G"),o=t.n(a),u=t("DnuM");function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){i()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var c=Object(u.a)("/api/onDemandPeerSubmissionDrafts.v1",{type:"rest"}),m=["submission","context","creatorId","attachedAssignmentId","createdAt","upgradeSubmissionToLatestAssignment","blocksSubmit","validationErrors","onDemandPeerReviewSchemas.v1(reviewSchema)","onDemandPeerSubmissionSchemas.v1(submissionSchema)"],d=["reviewSchemas","submissionSchemas"];function responseHandler(e){if(e.elements&&e.elements.length){var t=e.linked["onDemandPeerSubmissionSchemas.v1"]&&e.linked["onDemandPeerSubmissionSchemas.v1"].length&&e.linked["onDemandPeerSubmissionSchemas.v1"][0],r=e.linked["onDemandPeerReviewSchemas.v1"]&&e.linked["onDemandPeerReviewSchemas.v1"].length&&e.linked["onDemandPeerReviewSchemas.v1"][0];if(null==t)throw new Error("No linked submission schema in onDemandPeerSubmissionDraftsApi");return _objectSpread(_objectSpread({},e.elements[0]),{},{reviewSchema:r,submissionSchema:t})}throw new Error("No elements received in onDemandPeerSubmissionDraftsApi")}var l=function getSubmissionDraft(e){var t=e.userId,r=e.courseId,i=e.itemId,n="".concat(t,"~").concat(r,"~").concat(i),a=new o.a(n).addQueryParam("fields",m.join(",")).addQueryParam("includes",d.join(","));return s()(c.get(a.toString())).then(responseHandler)},b=function updateSubmissionDraft(e){var t=e.userId,r=e.courseId,i=e.itemId,n=e.submissionDraftUpdate,a="".concat(t,"~").concat(r,"~").concat(i),u=new o.a(a).addQueryParam("fields",m.join(",")).addQueryParam("includes",d.join(","));return s()(c.put(u.toString(),{data:n})).then(responseHandler)},v=function forceUpgradedSubmissionDraft(e){var t=e.userId,r=e.courseId,i=e.itemId,n=e.forceUpgradeToAssignmentId,a="".concat(t,"~").concat(r,"~").concat(i),u=(new o.a).addQueryParam("action","forceUpgradedDraft").addQueryParam("id",a).addQueryParam("forceUpgradeToAssignmentId",n).addQueryParam("fields",m.join(",")).addQueryParam("includes",d.join(","));return s()(c.post(u.toString())).then(function(e){return e[0]})}},QvzW:function(module,e,t){"use strict";t.r(e);var r=t("VbXa"),i=t.n(r),n=t("17x9"),s=t.n(n),a=t("q1tI"),o=t.n(a),u=t("8cuT"),c=t("F/us"),m=t.n(c),d=t("L1vm"),l=t("pR6o"),b=t("EdUP"),v=t("BVC1"),S=t("46g2"),f=t("1G4o"),p=t("VMeS"),h=t("JPic"),g=t("h3AF"),w=t("Ef0b"),P=t("sQ/U"),I=t("yhVA"),E=t.n(I),y=t("04NU"),R=t.n(y),O=function(e){function PeerItemGiveFeedback(){return e.apply(this,arguments)||this}i()(PeerItemGiveFeedback,e);var t=PeerItemGiveFeedback.prototype;return t.renderGiveFeedbackView=function renderGiveFeedbackView(){var e=this.props,t=e.submissionSummariesCollection,r=e.computedItem,i=e.submissionSummaries;if(!t||!i)return null;return o.a.createElement(g.a,{computedItem:r,submissionSummaries:i})},t.renderGiveFeedbackNoListView=function renderGiveFeedbackNoListView(){var e=this.props,t=e.computedItem,r=e.submissionSummariesCollection,i=e.itemProgress,n=e.displayablePhaseSchedule;if(!r)return null;var s=r.length>0,a=v.a.join(t.resourcePath,"review-next");if(i)return o.a.createElement(S.a,{computedItem:t,isSubmissionAvailableForReview:s,reviewNextLink:a,displayablePhaseSchedule:n,itemProgress:i});return null},t.renderSubmitWarning=function renderSubmitWarning(){return o.a.createElement(f.a,{computedItem:this.props.computedItem})},t.renderErrorState=function renderErrorState(e){if("mustSubmitBeforeReviewing"===e)return this.renderSubmitWarning();return o.a.createElement("div",{className:"rc-PeerItemGiveFeedback"},E()("An unknown error has occurred. Please refresh and try again."))},t.render=function render(){var e=this,t=this.props,r=t.assignment,i=t.capabilities,n=t.error;return function(){if(null!=n)return e.renderErrorState(n);var t=r&&r.definition&&r.definition.closureType;return m()(i).contains("reviewPeers")&&m()(i).contains("listSubmissions")?e.renderGiveFeedbackView():m()(i).contains("reviewPeers")&&!m()(i).contains("listSubmissions")?e.renderGiveFeedbackNoListView():null==t?e.renderSubmitWarning():null}()},PeerItemGiveFeedback}(o.a.Component);O.contextTypes={executeAction:s.a.func.isRequired};var A=m.a.compose(d.a.createTrackedContainer(function(){return{namespace:{page:"peer_review_review_peers"}}}),Object(u.a)(["PeerAssignmentStore","PeerPermissionsAndProgressesStore","PeerReviewQueueStore","DisplayablePhaseScheduleStore","ProgressStore"],function(e,t){var r=e.PeerAssignmentStore,i=e.PeerPermissionsAndProgressesStore,n=e.PeerReviewQueueStore,s=e.DisplayablePhaseScheduleStore,a=e.ProgressStore,o,u,c=n.getState(),d=c.loaded,l=c.loadState,b=c.submissions,v=c.errorType,S=c.itemId;if(d)if("loaded"===l&&t.computedItem.id===S){var f=b;o=new h.a(f,{parse:!0,metadata:t.itemMetadata})}else"loadError"===l&&(u=v);var p=i.getState(),g=p.capabilities,w=p.isSubmitted;return{assignment:r.getState().assignment,capabilities:g,isSubmitted:w,submissionSummariesCollection:o,submissionSummaries:null==b?void 0:b.submissionSummaries,error:u,displayablePhaseSchedule:s.getState().displayablePhaseSchedule,itemProgress:a.courseProgress.getItemProgress(t.computedItem.id),hasLoadedPermissions:"loaded"===i.getState().loadState,canReviewPeers:m()(g).contains("reviewPeers"),canListSubmissions:m()(g).contains("listSubmissions")}}),Object(b.a)(function(e){return e.hasLoadedPermissions},o.a.createElement(p.a,{className:"rc-PeerItemGiveFeedback"})),Object(l.a)(function(e,t){var r=t.canListSubmissions,i=t.canReviewPeers,n=t.computedItem,s=t.courseId;if(i){var a=r?20:1,o=0;e.executeAction(w.c,{userId:P.a.get().id,itemId:n.id,courseId:s,start:0,limit:a})}}))(O);e.default=A},RI4M:function(module,exports,e){},UTav:function(module,e,t){"use strict";t.d(e,"a",function(){return d});var r=t("S+eF"),i=t.n(r),n=t("fw5G"),s=t.n(n),a=t("DnuM"),o=Object(a.a)("/api/onDemandPeerAuthoredReviewSummaries.v1",{type:"rest"}),u=["submissionId","isMentorReview","creatorId","createdAt"],c=["userId","externalUserId","fullName","photoUrl","courseRole","isSuperuser"],m=["summary","computed"],d=function getReviewedSubmissions(e){var t=e.userId,r=e.courseId,n=e.itemId,a=(new s.a).addQueryParam("userId",t.toString()).addQueryParam("courseId",r).addQueryParam("itemId",n).addQueryParam("q","byItem").addQueryParam("includes",["submissionSummaries","onDemandPeerSubmissionSummaries.v2(profiles)"].join(",")).addQueryParam("fields",[u.join(","),"onDemandPeerSubmissionSummaries.v2(".concat(m.join(","),")"),"onDemandSocialProfiles.v1(".concat(c.join(","),")")].join(","));return i()(o.get(a.toString()))}},"af/C":function(module,exports,e){var t=e("RI4M"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var i={transform:void 0},n=e("aET+")(t,i);t.locals&&(module.exports=t.locals)},fAMf:function(module,e,t){"use strict";var r=t("3WF5"),i=t.n(r),n=t("O7iK"),s=t.n(n),a=t("WQ4j"),o=function initializeSubmissionFromSchema(e,t,r){var n;return{title:"",parts:s()(i()(e.parts,function(e){var t=e.id,i=e.details;return[t,Object(a.a)(i.typeName,r)]})),invalidParts:{},isDraft:!0,submittedBy:t,submittedAt:Date.now(),id:""}};e.a=o},h3AF:function(module,e,t){"use strict";var r=t("VbXa"),i=t.n(r),n=t("lSNA"),s=t.n(n),a=t("q1tI"),o=t.n(a),u=t("AeFk"),c=t("rzCt"),m=t("fguj"),d=t("oEqI"),l=t("GQaP"),b=t("beWW"),v=t("UTav"),S=t("Hk9X"),f=t("HCVm"),p=t("sQ/U"),h=t("yhVA"),g=t.n(h);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){s()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var w={LOADING:"LOADING",LOAD_ERROR:"LOAD_ERROR",READY:"READY"},P=function getNetworkStatusString(e){var t;return{LOADING:g()("Loading..."),LOAD_ERROR:g()("Load error!")}[e]},I={REVIEWED:"REVIEWED",NOT_REVIEWED:"NOT_REVIEWED"},E=function getFilterOptions(){return[{label:g()("Projects I have reviewed"),value:I.REVIEWED},{label:g()("Projects I have not reviewed"),value:I.NOT_REVIEWED}]},y=function getSubmissionSummaryWithProfile(e,t){var r=t.reduce(function(e,t){return _objectSpread(_objectSpread({},e),{},s()({},t.userId,t))},{});return e.map(function(e){return _objectSpread(_objectSpread({},e),{},{creator:r[e.creatorId]})})},R={filter:Object(u.c)({display:"flex",alignItems:"center",margin:"12px 0"}),filterSelect:function filterSelect(e){return Object(u.c)({flexDirection:"row",alignItems:"center","& label":{color:e.palette.gray[700],marginBottom:e.spacing(0),span:{display:"none !important"}},"& > div":{marginTop:"".concat(e.spacing(0)," !important"),marginLeft:e.spacing(8)}})},submisssionContainer:Object(u.c)({display:"flex",flexWrap:"wrap"})},O=function(e){function ListFeedbackView(){for(var t,r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return(t=e.call.apply(e,[this].concat(i))||this).state={filter:I.NOT_REVIEWED,reviewedSubmissionSummaries:[],notReviewedSubmissionSummaries:[],networkState:w.READY},t.onFilterChange=function(e){t.setState({filter:e.target.value})},t.onReviewedSubmissionsFetchSuccess=function(e){var r=Object(S.c)(e);t.setState({reviewedSubmissionSummaries:y(r.submissionSummaries,r.userProfiles),networkState:w.READY})},t.onNotReviewedSubmissionsFetchSuccess=function(e){var r=Object(S.b)(e);t.setState({notReviewedSubmissionSummaries:y(r.submissionSummaries,r.userProfiles),networkState:w.READY})},t.onFetchError=function(){t.setState({networkState:w.LOAD_ERROR})},t.getSubmissionSummariesForDisplay=function(){var e=t.getNextUpSubmissionThatNeedReviews(),r=t.state,i=r.filter,n=r.reviewedSubmissionSummaries,s=r.notReviewedSubmissionSummaries;if(i===I.NOT_REVIEWED)return s.filter(function(t){return t.id!==(null==e?void 0:e.id)});return n},t.getNextUpSubmissionThatNeedReviews=function(){var e;return t.props.submissionSummaries.filter(function(e){return!e.reviewTargetReached})[0]},t.fetchReviewedSubmissions=function(){var e=t.props.computedItem;return t.setState({networkState:w.LOADING,reviewedSubmissionSummaries:[]}),Object(v.a)({userId:p.a.get().id,courseId:e.courseId,itemId:e.id}).then(t.onReviewedSubmissionsFetchSuccess).catch(t.onFetchError)},t.fetchNotReviewedSubmissions=function(){var e=t.props.computedItem;return t.setState({networkState:w.LOADING,notReviewedSubmissionSummaries:[]}),Object(b.a)({userId:p.a.get().id,courseId:e.courseId,itemId:e.id}).then(t.onNotReviewedSubmissionsFetchSuccess).catch(t.onFetchError)},t}i()(ListFeedbackView,e);var t=ListFeedbackView.prototype;return t.componentDidMount=function componentDidMount(){this.fetchNotReviewedSubmissions()},t.componentDidUpdate=function componentDidUpdate(_,e){var t=this.state.filter;e.filter!==t&&(t===I.NOT_REVIEWED?this.fetchNotReviewedSubmissions():this.fetchReviewedSubmissions())},t.render=function render(){var e=this.props.computedItem,t=this.state,r=t.filter,i=t.networkState,n=this.getNextUpSubmissionThatNeedReviews(),s=this.getSubmissionSummariesForDisplay();return Object(u.d)("div",null,0===s.length&&Object(u.d)("div",null,g()("There are no submissions left for you to review. Please check again later!")),!n&&0!==s.length&&Object(u.d)("div",null,g()("You have reviewed all ungraded submissions. You may review graded submissions, but the authors will not receive your reviews, and your reviews will not count towards their grade. If possible, please check later for new submissions to review.")),n&&Object(u.d)(l.a,{itemResourcePath:e.resourcePath,submissionSummary:n}),Object(u.d)("div",{css:R.filter},Object(u.d)(c.a,{css:R.filterSelect,value:r,label:g()("Filter:"),optional:!0,onChange:this.onFilterChange},E().map(function(e){return Object(u.d)(m.a,{value:e.value},e.label)}))),Object(u.d)("div",{css:R.submisssionContainer},i!==w.READY&&Object(u.d)("p",null,P(i)),0===s.length&&i===w.READY&&Object(u.d)("div",null,g()("There are no submissions in this list.")),s.map(function(t){return Object(u.d)(f.a,{key:t.id,itemResourcePath:e.resourcePath,submissionSummary:t})})))},ListFeedbackView}(o.a.Component);e.a=Object(d.a)(O)},"o/MR":function(module,e,t){"use strict";t.d(e,"a",function(){return m});var r=t("S+eF"),i=t.n(r),n=t("fw5G"),s=t.n(n),a=t("DnuM"),o=Object(a.a)("/api/onDemandPeerAssignmentInstructions.v1",{type:"rest"}),u=["instructions"],c=["requiredAuthoredReviewCount","isMentorGraded","assignmentDetails"],m=function getAssignment(e){var t=e.userId,r=e.courseId,n=e.itemId,a=(new s.a).addQueryParam("q","latest").addQueryParam("userId",t.toString()).addQueryParam("courseId",r).addQueryParam("itemId",n).addQueryParam("includes",["gradingMetadata","reviewSchemas","submissionSchemas"].join(",")).addQueryParam("fields",[u,"onDemandPeerAssignmentGradingMetadata.v1(".concat(c.join(","),")"),"onDemandPeerReviewSchemas.v1(reviewSchema)","onDemandPeerSubmissionSchemas.v1(submissionSchema)"].join(","));return i()(o.get(a.toString()))}},rg2u:function(module,exports,e){var t=e("PJCk"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var i={transform:void 0},n=e("aET+")(t,i);t.locals&&(module.exports=t.locals)},sRzZ:function(module,exports,e){},uPmI:function(module,e,t){"use strict";t.d(e,"b",function(){return E}),t.d(e,"a",function(){return y});var r=t("yXPU"),i=t.n(r),n=t("o0o1"),s=t.n(n),a=t("fw5G"),o=t.n(a),u=t("S+eF"),c=t.n(u),m=t("F/us"),d=t.n(m),l=t("DnuM"),b=Object(l.a)("/api/onDemandPeerAssignmentPermissions.v1",{type:"rest"}),v=Object(l.a)("/api/onDemandPeerSubmissionProgresses.v1",{type:"rest"}),S="onDemandPeerSubmissionProgresses.v1",f="onDemandPeerReceivedReviewProgresses.v1",p="onDemandPeerDisplayablePhaseSchedules.v1",h=["latestSubmissionSummary","latestDraftSummary","latestAttemptSummary"],g=["evaluationIfReady","earliestCompletionTime","reviewCount","defaultReceivedReviewRequiredCount"],w=["currentPhase","phaseEnds","phaseStarts"],P=["deleteSubmission","listSubmissions","reviewPeers","viewReviewSchema","anonymousPeerReview","".concat(S,"(").concat(h.join(","),")"),"".concat(f,"(").concat(g.join(","),")"),"".concat(p,"(").concat(w.join(","),")")],I=["receivedReviewsProgress","submissionProgress","phaseSchedule"],E=function getPermissionsAndProgresses(e,t,r){var i=new o.a("".concat(e,"~").concat(t,"~").concat(r)).addQueryParam("fields",P.join(",")).addQueryParam("includes",I.join(","));return c()(b.get(i.toString())).then(function(e){return{assignmentPermissions:d()(e.elements).first(),submissionProgresses:d()(e.linked[S]).first(),receivedReviewProgresses:d()(e.linked[f]).first(),displayablePhaseSchedules:d()(e.linked[p]).first()}})},y=function(){var e=i()(s.a.mark(function _callee(e){var t,r,i,n,a,u;return s.a.wrap(function _callee$(s){for(;;)switch(s.prev=s.next){case 0:return r=e.userId,i=e.courseId,n=e.itemId,a=new o.a("".concat(r,"~").concat(i,"~").concat(n)).addQueryParam("fields",h.join(",")),s.next=4,v.get(a.toString());case 4:return u=s.sent,s.abrupt("return",null===(t=u.elements)||void 0===t?void 0:t[0]);case 6:case"end":return s.stop()}},_callee)}));return function getPeerSubmissionProgresses(t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=87.61f4a09b13ff356b3228.js.map